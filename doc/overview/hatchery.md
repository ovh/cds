# Hatchery

Hatchery is a binary dedicated to spawn and kill worker in accordance with build queue needs.

An hatchery is started with permissions to build all pipelines accessible from a given group, using token generated by user.

There is 5 modes for hatcheries:

 * Local (Start workers on a single host)
 * Local Docker (Start worker model instances on a single host)
 * Marathon (Start worker model instances on a mesos cluster with marathon framework)
 * Swarm (Start worker on a docker swarm cluster)
 * Openstack (Start hosts on an openstack cluster)

### Local mode

Hatchery starts workers directly as local process.

### Docker mode

Hatchery starts workers inside docker containers on the same host. Setup tutorial [here](/doc/tutorials/first-hatchery.md)

### Marathon mode

Hatchery starts workers inside containers on a mesos cluster using Marathon API.

### Openstack mode

Hatchery starts workers on Openstack servers using Openstack Nova. Setup tutorial [here](/doc/tutorials/hatchery-openstack.md)

### Swarm mode

The hatchery connects to a swarm cluster and starts workers inside containers.

## Admin hatchery

As a CDS administrator, it is possible to generate an access token for all projects using the `shared.infra` group.

This group is builtin to CDS, and has the following properties:

 * All CDS administrators are administrator of this group
 * At pipeline creation, this group is added with Read/Execution permission automatically

This means that by default, an hatchery using a token generated for this group will be able to build all pipelines.

Should a user want to avoid building on shared infrastructure, he only need to remove access of `shared.infra` group to his pipeline.
