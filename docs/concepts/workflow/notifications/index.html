<!DOCTYPE html>
<html id="docs" lang="en" class="">
	<head>
	<meta charset="utf-8">
<title>Notifications - CDS - Continuous Delivery Service</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="../../../../images/favicon.png">




<link rel="stylesheet" href="../../../../sass/styles.css" integrity="" media="screen">
<link rel="stylesheet" href="../../../../css/callouts.css">
<link rel="stylesheet" href="../../../../css/auto-complete.css">
<link rel="stylesheet" href="../../../../css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../css/asciinema-player.css">
<link rel="stylesheet" href="../../../../css/solarized-light.css">

<meta name="description"
    content="On a workflow you can have 2 kinds of notifications:
 User notifications: they are useful to notify users by email or with a message of an event on your workflow (success, fail, change, etc&hellip;). Events: linked to event integrations to let you write microservices which can interact with these events plugged on your event integrations.  User notifications You can configure user notifications to send email with different parameters. Inside the body of the notification you can customise the message thanks to the CDS variable templating with syntax like {{.">
<meta property="og:description"
    content="On a workflow you can have 2 kinds of notifications:
 User notifications: they are useful to notify users by email or with a message of an event on your workflow (success, fail, change, etc&hellip;). Events: linked to event integrations to let you write microservices which can interact with these events plugged on your event integrations.  User notifications You can configure user notifications to send email with different parameters. Inside the body of the notification you can customise the message thanks to the CDS variable templating with syntax like {{.">
<meta name="twitter:description"
    content="On a workflow you can have 2 kinds of notifications:
 User notifications: they are useful to notify users by email or with a message of an event on your workflow (success, fail, change, etc&hellip;). Events: linked to event integrations to let you write microservices which can interact with these events plugged on your event integrations.  User notifications You can configure user notifications to send email with different parameters. Inside the body of the notification you can customise the message thanks to the CDS variable templating with syntax like {{.">
<meta property="og:url" content="/docs/concepts/workflow/notifications/">
<meta property="og:title" content="Notifications">
<meta name="twitter:title" content="Notifications">
<meta name="twitter:image:alt" content="CDS - Continuous Delivery Service">
<meta property="og:image" content="/images/cds-transparent.png">
<script type="text/javascript" src="../../../../js/anchor-4.1.1.min.js"></script>
<script type="text/javascript" src="../../../../js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="../../../../js/jquery-ui-1.12.1.min.js"></script>
<script type="text/javascript" src="../../../../js/bootstrap-3.3.7.min.js"></script>
<script type="text/javascript" src="../../../../js/highlight.pack.js"></script>
<script>
    hljs.initHighlightingOnLoad();

</script>
<script type="text/javascript" src="../../../../js/script.js"></script>
<script type="text/javascript" src="../../../../js/lunr.min.js"></script>
<a id="indexJSON" href="../../../../index.json"></a>

<script type="text/javascript" src="../../../../js/auto-complete.js"></script>
<script type="text/javascript" src="../../../../js/search.js"></script>
<script type="text/javascript" src="../../../../js/asciinema-player.js"></script>

	</head>
	<body>
		<section id="hero" class="light-text no-sub">
			<a href="../../../../" class="logo"></a>
				<i id="tocburger" class="fa fa-bars" onclick='$("#toc").toggle()'></i><div class="nav-buttons" data-auto-burger="primary">
				<ul class="global-nav">
					
					
					<li><a href="../../../../docs/" class="active">Documentation</a></li>
					
					<li><a href="../../../../hosting/">Hosting your own instance</a></li>
					
					<li><a href="../../../../development/">CDS Developer Manual</a></li>
					
					<li><a href="../../../../about/">About</a></li>
					
					<li><i class="fa fa-search" onclick='$("#searchbox").toggle(); $("#search-query").focus().select()'></i></li>
					<li>
						<div id="btn-gh">
							<a class="github-button" href="https://github.com/ovh/cds" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star CDS on GitHub">Star</a>
							<script async defer src="https://buttons.github.io/buttons.js"></script>
						</div>
					</li>
				</ul>
				<div id="searchbox">
					<input data-search-input id="search-query" type="text" placeholder="search...">
					<span data-search-clear=""><i class="fa fa-close"></i></span>
				</div>
			</div>

<div id="headSubMenu" class="light-text">




	

		

		
		<ul>
			
			
			
			<li><a href="../../../../docs/">Home</a></li>
			
			
				
				<li><a href="../../../../docs/concepts/" class="menuSelected">Concepts</a></li>
			
				
				<li><a href="../../../../docs/actions/">Actions</a></li>
			
				
				<li><a href="../../../../docs/components/">Components</a></li>
			
				
				<li><a href="../../../../docs/integrations/">Integrations</a></li>
			
				
				<li><a href="../../../../docs/tutorials/">Tutorials</a></li>
			
		</ul>
		
	

	

		

		
	

	

		

		
	

	

		

		
	

</div>


		</section>
		<section id="page-content-with-menu">
			
<div id="toc">
     <div class="toc-container">
        
        
        
        
        
            
                
                    
                        
                            
                                    
                                    
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                
            
        
            
                
                    
                        
                    
                        
                    
                
            
        
            
                
                    
                        
                    
                        
                    
                        
                    
                
            
        
            
                
                    
                
            
        
        
        <i class="fa fa-bars" id="tocburger" onclick='$("#toc").toggle()'></i> 
<a class="item" data-title="Concepts" href="../../../../docs/concepts/"></a>

	
	
	
	
		
			
<a class="item" data-title="Authentication" href="../../../../docs/concepts/authentication/"></a>

		
	
		
			
<a class="item" data-title="Job" href="../../../../docs/concepts/job/"></a>

		
	
		
			
<a class="item" data-title="Project" href="../../../../docs/concepts/project/"></a>

		
	
		
			
<a class="item" data-title="Permissions - ACLs" href="../../../../docs/concepts/permissions/"></a>

		
	
		
			
<a class="item" data-title="Pipeline" href="../../../../docs/concepts/pipeline/"></a>

		
	
		
			
<a class="item" data-title="Variables" href="../../../../docs/concepts/variables/"></a>

		
	
		
			
<div class="item" data-title="Workflow">
	<div class="container">
		
		<a class="item" data-title="Workflow" href="../../../../docs/concepts/workflow/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Payload" href="../../../../docs/concepts/workflow/payload/"></a>

		
	
		
			
<a class="item" data-title="Pipeline Context" href="../../../../docs/concepts/workflow/pipeline-context/"></a>

		
	
		
			
<div class="item" data-title="Hooks">
	<div class="container">
		
		<a class="item" data-title="Hooks" href="../../../../docs/concepts/workflow/hooks/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Webhook" href="../../../../docs/concepts/workflow/hooks/webhook/"></a>

		
	
		
			
<a class="item" data-title="Scheduler" href="../../../../docs/concepts/workflow/hooks/scheduler/"></a>

		
	
		
			
<a class="item" data-title="Git Repository Webhook" href="../../../../docs/concepts/workflow/hooks/git-repo-webhook/"></a>

		
	
		
			
<a class="item" data-title="Git Repository Poller" href="../../../../docs/concepts/workflow/hooks/git-repo-poller/"></a>

		
	
		
			
<a class="item" data-title="Kafka hook" href="../../../../docs/concepts/workflow/hooks/kafka-hook/"></a>

		
	
		
			
<a class="item" data-title="RabbitMQ hook" href="../../../../docs/concepts/workflow/hooks/rabbitmq-hook/"></a>

		
	
		
			
<a class="item" data-title="Gerrit Hook" href="../../../../docs/concepts/workflow/hooks/gerrit/"></a>

		
	

	</div>
</div>

		
	
		
			
<a class="item" data-title="Run conditions on pipeline" href="../../../../docs/concepts/workflow/run-conditions/"></a>

		
	
		
			
<a class="item" data-title="Join" href="../../../../docs/concepts/workflow/join/"></a>

		
	
		
			
<a class="item" data-title="Mutex" href="../../../../docs/concepts/workflow/mutex/"></a>

		
	
		
			
<a class="item" data-title="Sidebar" href="../../../../docs/concepts/workflow/sidebar/"></a>

		
	
		
			
<a class="item" data-title="Run Number" href="../../../../docs/concepts/workflow/run-number/"></a>

		
	
		
			
<a class="item" data-title="Notifications" href="../../../../docs/concepts/workflow/notifications/"></a>

		
	
		
			
<a class="item" data-title="Retention" href="../../../../docs/concepts/workflow/retention/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Requirement">
	<div class="container">
		
		<a class="item" data-title="Requirement" href="../../../../docs/concepts/requirement/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Region Requirement" href="../../../../docs/concepts/requirement/requirement_region/"></a>

		
	
		
			
<a class="item" data-title="Secret Requirement" href="../../../../docs/concepts/requirement/requirement_secret/"></a>

		
	
		
			
<a class="item" data-title="Service Link" href="../../../../docs/concepts/requirement/requirement_service/"></a>

		
	
		
			
<a class="item" data-title="Memory" href="../../../../docs/concepts/requirement/requirement_memory/"></a>

		
	
		
			
<a class="item" data-title="OS &amp; Architecture" href="../../../../docs/concepts/requirement/requirement_os_arch/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Configuration files">
	<div class="container">
		
		<a class="item" data-title="Configuration files" href="../../../../docs/concepts/files/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Workflow configuration file" href="../../../../docs/concepts/files/workflow-syntax/"></a>

		
	
		
			
<a class="item" data-title="Pipeline configuration file" href="../../../../docs/concepts/files/pipeline-syntax/"></a>

		
	
		
			
<a class="item" data-title="Worker Model configuration file" href="../../../../docs/concepts/files/worker_model-syntax/"></a>

		
	
		
			
<a class="item" data-title="Action configuration file" href="../../../../docs/concepts/files/action-syntax/"></a>

		
	
		
			
<a class="item" data-title="Application configuration file" href="../../../../docs/concepts/files/application-syntax/"></a>

		
	
		
			
<a class="item" data-title="Environment configuration file" href="../../../../docs/concepts/files/environment-syntax/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Worker Model">
	<div class="container">
		
		<a class="item" data-title="Worker Model" href="../../../../docs/concepts/worker-model/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Worker Model patterns" href="../../../../docs/concepts/worker-model/patterns/"></a>

		
	
		
			
<a class="item" data-title="Worker Model Variables" href="../../../../docs/concepts/worker-model/variables/"></a>

		
	

	</div>
</div>

		
	
		
			
<a class="item" data-title="Workflow Template" href="../../../../docs/concepts/template/"></a>

		
	





     </div>
</div>


			<div id="docsContent">
        		

<h1>Notifications</h1>



<nav id="TableOfContents">
  <ul>
    <li><a href="#user-notifications">User notifications</a></li>
    <li><a href="#vcs-notifications">VCS Notifications</a></li>
    <li><a href="#events">Events</a></li>
  </ul>
</nav>

<p>On a workflow you can have 2 kinds of notifications:</p>
<ul>
<li>User notifications: they are useful to notify users by email or with a message of an event on your workflow (success, fail, change, etc&hellip;).</li>
<li>Events: linked to event integrations to let you write microservices which can interact with these events plugged on your event integrations.</li>
</ul>
<h2 id="user-notifications">User notifications</h2>
<p>You can configure user notifications to send email with different parameters. Inside the body of the notification you can customise the message thanks to the CDS variable templating with syntax like <code>{{.cds.myvar}}</code>. You can also use <code>HTML</code> to customise the message, then in order to let CDS interpret your message as an <code>HTML</code> one you just need to wrap all your message inside html tag like this <code>&lt;html&gt;MyContentHere&lt;/html&gt;</code>.</p>
<h2 id="vcs-notifications">VCS Notifications</h2>
<p>You can configure for which node in your workflow CDS have to send a status on your repository service provider (Github, Bitbucket, &hellip;). You can configure if you want to have a comment on your pull-request when your workflow fails or you can just disable pull-request comment to only have status of your pipelines. By default you already have a default template for your pull-request comment but you can customize it with different kinds of templating. To have access about the <code>node run</code> data and write some loops and conditions you can use the standard syntax as the <a href="https://golang.org/pkg/text/template/#hdr-Actions">go templating</a> but with <code>[[</code> <code>]]</code> delimitters. You can also use the CDS interpolation engine with the same syntax you already know and use inside pipelines, for example: <code>{{.cds.workflow}}</code> to get the name of the workflow.</p>
<p>For the go templating you have few variables you can use/iterate over.</p>
<ul>
<li><code>.Stages</code>: an array of stages with <code>.RunJobs</code>inside which are the array of runned jobs with their <code>.Name</code>
<ul>
<li><code>.RunJobs</code>: Inside a stage object which are the array of runned jobs
<ul>
<li><code>.Job.Action.Name</code>: The name of the runned job</li>
<li><code>.Job.Status</code>: The status of runned job</li>
</ul>
</li>
</ul>
</li>
<li><code>.Tests</code>: array of tests results
<ul>
<li><code>.Total</code>: total number of tests</li>
<li><code>.TotalOK</code>: total number of OK tests</li>
<li><code>.TotalKO</code>: total number of KO tests</li>
<li><code>.TotalSkipped</code>: total number of skipped tests</li>
</ul>
</li>
</ul>
<p>If you need to know about other variable you can check <code>WorkflowNodeRun</code> data structure <a href="https://github.com/ovh/cds/blob/master/sdk/workflow_run.go">here</a>.</p>
<p>For example by default the template of pull-request comment is:</p>
<pre><code>[[- if .Stages ]]
CDS Report [[.WorkflowNodeName]]#[[.Number]].[[.SubNumber]] [[ if eq .Status &quot;Success&quot; -]] ✔ [[ else ]][[ if eq .Status &quot;Fail&quot; -]] ✘ [[ else ]][[ if eq .Status &quot;Stopped&quot; -]] ■ [[ else ]]- [[ end ]] [[ end ]] [[ end ]]
[[- range $s := .Stages]]
[[- if $s.RunJobs ]]
* [[$s.Name]]
[[- range $j := $s.RunJobs]]
  * [[$j.Job.Action.Name]] [[ if eq $j.Status &quot;Success&quot; -]] ✔ [[ else ]][[ if eq $j.Status &quot;Fail&quot; -]] ✘ [[ else ]][[ if eq $j.Status &quot;Stopped&quot; -]] ■ [[ else ]]- [[ end ]] [[ end ]] [[ end ]]
[[- end]]
[[- end]]
[[- end]]
[[- end]]

[[- if .Tests ]]
[[- if gt .Tests.TotalKO 0]]
Unit Tests Report

[[- range $ts := .Tests.TestSuites]]
* [[ $ts.Name ]]
[[range $tc := $ts.TestCases]]
  [[- if or ($tc.Errors) ($tc.Failures) ]]  * [[ $tc.Name ]] ✘ [[- end]]
[[end]]
[[- end]]
[[- end]]
[[- end]]
</code></pre><p>Which, for a pipeline with 1 stage and a job in failure, is displayed like this:</p>
<pre><code>CDS Report build#11.0 ✘
* Stage 1
  * my job ✘
</code></pre><p>And displayed on GitHub:</p>
<p><img src="../images/example_pr_comment.png?height=200px" alt="example_pr_comment.png"></p>
<h2 id="events">Events</h2>
<p>If you need to trigger some specific actions on the technical side, like for example use a microservice which listens to all events in your workflow (updates, launch, stop, etc.), you can add an event integration like, for example, <a href="../../../../docs/integrations/kafka/kafka_events/">Kafka</a> and listen to the kafka topic to trigger some actions on your side. Events are more like sending notifications to machines instead of user notifications which are made for users. The see structure of sent events, you can look <a href="https://github.com/ovh/cds/blob/master/sdk/event.go">here</a> and <a href="https://github.com/ovh/cds/blob/master/sdk/event_workflow.go">here</a>.</p>




			</div>
		</section><footer>
			<main>
			<a href="https://www.ovh.com"><img src="https://ovh.github.io/cds/images/logo-ovh-white-72DPI.png"></a>
			<div>
				The CDS logos are copyrighted.
				Icons made by <a href="https://www.flaticon.com/authors/eucalyp">Eucalyp</a> 
				from <a href="https://www.flaticon.com/">www.flaticon.com</a>
			</div>
			</main>
		</footer>

	</body>
</html>
