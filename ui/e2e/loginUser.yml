name: Create project/application/pipeline
vars:
  ui.url: '{{.cds.build.url}}'
  ui.user: '{{.cds.build.user}}'
  ui.password: '{{.cds.build.user_password}}'
testcases:
- name: CreateProjAppPip
  context:
    type: web
    width: 1920
    height: 1080
    driver: chrome
  steps:
  - action:
      navigate:
        url: '{{.ui.url}}'
        reset: true
    screenshot: CreateProjPipEnv_GoToLoginPage.jpg
    assertions:
    - result.title ShouldEqual CDS
  - action:
      fill:
      - find: input[name="username"]
        text: '{{.ui.user}}'
      - find: input[name="password"]
        text: '{{.ui.password}}'
    screenshot: CreateProjPipEnv_TypeLogin.jpg
  - action:
      click:
        find: 'button#loginButton'
        wait: 2
    screenshot: CreateProjPipEnv_submitLogin.jpg
  - action:
      click:
        find: a[href*="/project"]
    assertions:
    - result.url ShouldEqual {{.ui.url}}/project
  - action:
      fill:
      - find: input[name="projectname"]
        text: uie2eProject
      - find: '#PermissionGroupName input.search'
        text: CDS_TEAM
      - find: '#PermissionGroupLevel input.search'
        text: 'Read / Write / Execute'
    screenshot: CreateProjPipEnv_typeProjectName.jpg
  - action:
      click:
        find: button.ui.blue
    screenshot: CreateProjPipEnv_addPermission.jpg
  - action:
      click:
         find: button.ui.green
         wait: 2
    screenshot: CreateProjPipEnv_addProject.jpg