<form nz-form name="addReqForm" *ngIf="availableRequirements.length > 0" #formAddRequirement="ngForm">
    <div nz-row>
        <div nz-col nzSpan="6">
            <nz-form-item>
                <nz-select [(ngModel)]="newRequirement.type" (ngModelChange)="selectType()" name="selectType"
                           nzPlaceHolder="{{ 'requirement_type' | translate }}">
                    <nz-option *ngFor="let r of availableRequirements" [nzValue]="r" [nzLabel]="r"></nz-option>
                </nz-select>
            </nz-form-item>
        </div>
        <div nz-col nzSpan="12">
            <nz-form-item>
                <div *ngIf="newRequirement.type === 'service'" class="container">
                    {{ 'requirement_hostname_service' | translate }}
                    <input nz-input [nzAutocomplete]="autoSuggestService" name="requirementname" id="requirementname" [disabled]="newRequirement.type !== 'service'" type="text" required pattern="[a-zA-Z0-9\-\._]*" placeholder="{{placeholderTypeName[newRequirement.type]}}" [(ngModel)]="newRequirement.name">
                    <nz-autocomplete [nzDataSource]="suggest" nzBackfill #autoSuggestService></nz-autocomplete>
                    <div *ngIf="formAddRequirement.invalid && !formAddRequirement.pristine" class="ui error message">
                        <p>{{'requirement_hostname_error' | translate}}</p>
                    </div>
                </div>
                <div class="container" *ngIf="newRequirement.type === 'os-architecture'">
                    <input nz-input [nzAutocomplete]="autoSuggestArch"  name="name" [disabled]="newRequirement.type !== 'os-architecture'" type="text" required placeholder="{{'requirement_placeholder_name_' + newRequirement.type | translate}}"
                           [(ngModel)]="newRequirement.value" (keyup)="setName(formAddRequirement)" (blur)="setName(formAddRequirement)">
                    <nz-autocomplete [nzDataSource]="suggestWithOsArch" nzBackfill #autoSuggestArch></nz-autocomplete>
                    <div *ngIf="formAddRequirement.invalid && !formAddRequirement.pristine" class="ui error message">
                        <p>{{'requirement_os-architecture_error' | translate}}</p>
                    </div>
                </div>
                <div class="container" *ngIf="newRequirement.type !== 'model' && newRequirement.type !== 'os-architecture'">
                    <span *ngIf="newRequirement.type === 'service'">{{ 'requirement_value_service' | translate }}</span>
                    <input nz-input name="value" id="value" [nzAutocomplete]="autoServiceImage" type="text" [(ngModel)]="newRequirement.value" (keyup)="setName(formAddRequirement)" placeholder="{{placeholderTypeValue[newRequirement.type]}}">
                    <nz-autocomplete [nzDataSource]="suggest" nzBackfill #autoServiceImage></nz-autocomplete>
                </div>

                <div class="container" *ngIf="newRequirement.type === 'model' && workerModels != null">
                    <input nz-input name="value-workermodel" [nzAutocomplete]="autoModel" type="text" [(ngModel)]="newRequirement.value" (keyup)="setName(formAddRequirement)" (blur)="setName(formAddRequirement)" placeholder="{{'requirement_placeholder_value_model' | translate}}">
                    <nz-autocomplete [nzDataSource]="suggestWithWorkerModel" nzBackfill #autoModel></nz-autocomplete>
                    <p *ngIf="workerModelLinked != null">
                        <a class="ui" [routerLink]="['/settings', 'worker-model', newRequirement.value]" target="_blank">
                            {{ 'requirement_settings_worker_model' | translate }} {{ newRequirement.value }}
                        </a>
                    </p>
                    {{ 'requirement_options' | translate }}
                    <textarea nz-input name="opts" id="opts" [(ngModel)]="newRequirement.opts" rows="3" placeholder="{{'requirement_placeholder_opts_model' | translate}}"></textarea>
                </div>
                <div class="container" *ngIf="newRequirement.type === 'service'">
                    {{ 'requirement_options' | translate }}
                    <textarea nz-input name="servopts" id="servopts" [(ngModel)]="newRequirement.opts" rows="3" placeholder="{{'requirement_placeholder_opts_service' | translate}}"></textarea>
                </div>
            </nz-form-item>
        </div>
        <div nz-col nzSpan="2">
            <nz-form-item *ngIf="workerModelLinked">
                <span *ngIf="workerModelLinked.is_official" nz-tooltip nzTooltipTitle="{{'worker_model_official_tooltip' | translate}}" nzTooltipPlacement="top"><i class="check circle outline icon large green"></i></span>
                <span *ngIf="!workerModelLinked.is_official" nz-tooltip nzTooltipTitle="{{'worker_model_unofficial' | translate}}" nzTooltipPlacement="top"><i class="remove circle outline icon large red"></i></span>
                <span *ngIf="workerModelLinked.is_deprecated" nz-tooltip nzTooltipTitle="{{'worker_model_deprecated_tooltip' | translate}}" nzTooltipPlacement="top"><i class="exclamation circle icon large orange"></i></span>
            </nz-form-item>
        </div>
        <div nz-col nzSpan="4">
            <nz-form-item>
                <div suiPopup
                     [popupText]="popupText"
                     popupPlacement="top"
                     *ngIf="(newRequirement.type === 'model' && config.disableModel) || (newRequirement.type === 'hostname' && config.disableHostname) || (newRequirement.type === 'region' && config.disableRegion)">
                    <button class="ui blue icon button"
                            [disabled]="!isFormValid"
                            (click)="onSubmitAddRequirement(formAddRequirement)">
                        <i class="plus icon"></i>
                    </button>
                </div>
                <div *ngIf="(newRequirement.type !== 'model' || !config.disableModel) && (newRequirement.type !== 'hostname' || !config.disableHostname) && (newRequirement.type !== 'region' || !config.disableRegion)">
                    <button class="ui blue icon button"
                            [disabled]="!isFormValid"
                            (click)="onSubmitAddRequirement(formAddRequirement)">
                        <i class="plus icon"></i>
                    </button>
                </div>
            </nz-form-item>
        </div>
    </div>



    <p>
        <i class="fa fa-book"></i>
        <a href="#" [routerLink]="['/docs', 'docs', 'concepts', 'requirement']" target="_blank" rel="noopener noreferrer">
        {{ 'requirement_documentation' | translate }} </a>
    </p>

    <div [ngSwitch]="newRequirement.type">
        <div *ngSwitchCase="'binary'">
            {{ 'requirement_help_binary_0' | translate }}
        </div>
        <div *ngSwitchCase="'hostname'">
            {{ 'requirement_help_hostname_0' | translate }}
        </div>
        <div *ngSwitchCase="'os-architecture'">
            {{ 'requirement_help_os-architecture_0' | translate }}
        </div>
        <div *ngSwitchCase="'model'">
            {{ 'requirement_help_model_0' | translate }}
            <ul>
                <li>{{ 'requirement_help_model_1' | translate }}</li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'tutorials', 'worker_model-docker']">{{ 'requirement_help_model_2' | translate }}</a></li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'tutorials', 'worker_model-docker', 'docker-customized']">{{ 'requirement_help_model_3' | translate }}</a></li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'tutorials', 'worker_model-openstack']">{{ 'requirement_help_model_4' | translate }}</a></li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'concepts', 'worker-model']">{{ 'requirement_help_model_5' | translate }}</a></li>
            </ul>        
        </div>
        <div *ngSwitchCase="'memory'">
            {{ 'requirement_help_memory_0' | translate }}
            <ul>
                <li>{{ 'requirement_help_memory_1' | translate }}</li>
                <li>{{ 'requirement_help_memory_2' | translate }}<a href="#" [routerLink]="['/docs', 'docs', 'concepts', 'worker-model']">Worker Model</a> type Docker</li>
            </ul>
        </div>
        <div *ngSwitchCase="'service'">
            {{ 'requirement_help_service_0' | translate }}
            <ul>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'concepts', 'requirement']">{{ 'requirement_help_service_1' | translate }}</a></li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'tutorials', 'service-requirement-nginx']">{{ 'requirement_help_service_2' | translate }}</a></li>
                <li><a target="_blank" href="#" [routerLink]="['/docs', 'docs', 'tutorials', 'service-requirement-pg']">{{ 'requirement_help_service_3' | translate }}</a></li>
                <li>{{ 'requirement_help_service_4' | translate }}</li>
            </ul>
        </div>
    </div>
</form>
