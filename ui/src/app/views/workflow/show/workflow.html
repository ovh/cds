<div id="WorkflowShow">
    <div class="CDSbreadcrumb">
        <app-breadcrumb [project]="project"></app-breadcrumb>
    </div>
    <div class="CDSmenu">
        <sm-menu title="" class="pointing secondary">
            <a *ngIf="true" sm-item [class.active]="selectedTab === 'workflow'" (click)="showTab('workflow')"><i class="sitemap icon"></i>{{
                'common_workflow' | translate }}</a>
        </sm-menu>
    </div>
    <div class="scrollingContent">
        <div class="paddingContent">
            <div class="viewContent">

                    <div class="ui right floated green buttons">
                        <div class="ui button" (click)="runWorkflow()" [class.loading]="loading">{{ 'btn_run_workflow' | translate }}</div>
                        <sm-dropdown class="icon button">
                            <sm-item>
                                {{ 'btn_run_custom_worklow' | translate }}
                            </sm-item>
                        </sm-dropdown>

                    </div>
                    <!--
                    <div class="right floated">
                        <button class="ui left attached green button" (click)="runWorkflow()">{{ 'btn_run_workflow' | translate }}</button>
                        <button class="ui right attached green button">{{ 'btn_run_custom_worklow' | translate }}</button>
                    </div>
                    -->
                    <ng-container *ngIf="project && detailedWorkflow">
                        <app-workflow-graph [workflow]="detailedWorkflow" [project]="project"
                            (addSrcToJoinEvent)="addSourceToJoin($event)"
                            (deleteJoinSrcEvent)="openDeleteJoinSrcModal($event)"
                            (editTriggerJoinEvent)="openEditJoinTriggerModal($event)"
                            (editTriggerEvent)="openEditTriggerModal($event)" #workflowGraph></app-workflow-graph>
                    </ng-container>
                    <div class="ui text active loader" *ngIf="!detailedWorkflow || !project">Loading workflow...</div>

            </div>
        </div>
    </div>
</div>


<ng-container *ngIf="project && detailedWorkflow">
    <app-workflow-trigger
            [project]="project"
            [workflow]="detailedWorkflow"
            [triggerSrcNode]="selectedNode"
            [(trigger)]="selectedTrigger"
            (triggerChange)="updateTrigger()"
    #editTriggerComponent></app-workflow-trigger>
</ng-container>
<ng-container *ngIf="project && detailedWorkflow">
    <app-workflow-trigger-join
            [project]="project"
            [workflow]="detailedWorkflow"
            [join]="selectedJoin"
            [(trigger)]="selectedJoinTrigger"
            (triggerChange)="updateJoinTrigger()"
            #editJoinTriggerComponent></app-workflow-trigger-join>
</ng-container>
<ng-container *ngIf="project && detailedWorkflow">
    <app-workflow-trigger-join-src [join]="selectedJoin" (event)="deleteJoinSrc($event)" #workflowJoinTriggerSrc></app-workflow-trigger-join-src>
</ng-container>

