<div class="wrapper">
    <div class="summary" *ngIf="!testCaseSelected" >
        <div class="ui grid">
            <div class="ui row" *ngIf="tests">
                <div class="right aligned five wide column">
                    <a class="pointing" (click)="statusFilter('all')">
                        {{tests.total}}
                        <span *ngIf="tests.total > 1">{{'pipeline_run_test_total_title_s' | translate}}</span>
                        <span *ngIf="tests.total < 2">{{'pipeline_run_test_total_title' | translate}}</span>
                    </a>
                </div>
                <div class="centered five wide column">
                    <a class="pointing" (click)="statusFilter('failed')">
                        {{ tests.ko }}
                        <span *ngIf="tests.ko > 1">{{'pipeline_run_test_failed_title_s' | translate}}</span>
                        <span *ngIf="tests.ko < 2">{{'pipeline_run_test_failed_title' | translate}}</span>
                    </a>
                </div>
                <div class="five wide column">
                    <a class="pointing" (click)="statusFilter('skipped')">
                        {{ tests.skipped }}
                        <span *ngIf="tests.skipped > 1">{{'pipeline_run_test_skipped_title_s' | translate}}</span>
                        <span *ngIf="tests.skipped < 2">{{'pipeline_run_test_skipped_title' | translate}}</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="ui grid">
        <div *ngIf="!testCaseSelected" class="sixteen wide column">
            <app-data-table [withPagination]="25" [filter]="filterInput" [withFilter]="filter"
                [columns]="columns" [data]="getTestCases()"
                [withLineClick]="true" (clickLine)="clickTestCase($event)" [loading]="loading">
            </app-data-table>
        </div>
        <div *ngIf="testCaseSelected" class="sixteen wide column">
            <div class="right floated">
                <button class="ui primary button" (click)="testCaseSelected=null">
                    {{ 'btn_back' | translate }}
                </button>
            </div>

            <h4>{{ 'common_name' | translate }}</h4>
            <p> 
                <ng-container [ngSwitch]="testCaseSelected.status">
                    <i *ngSwitchCase="'failed'" class="red remove circle icon"></i>
                    <i *ngSwitchCase="'success'" class="green check icon"></i>
                    <i *ngSwitchDefault class="grey ban icon"></i>
                </ng-container>
                {{ testCaseSelected.fullname }}
            </p>
            <div [ngSwitch]="testCaseSelected.status">
                <div *ngSwitchCase="'failed'">
                    <h4>Output</h4>
                    <codemirror
                        *ngIf="testCaseSelected.errorsAndFailures && testCaseSelected.errorsAndFailures !== ''"
                        [ngModel]="testCaseSelected.errorsAndFailures"
                        [config]="codeMirrorConfig"
                        #textareaCodeMirror>
                    </codemirror>
                </div>
                <div *ngSwitchCase="'success'">
                    <div *ngIf="testCaseSelected.systemout && testCaseSelected.systemout.value">
                        <h4>Systemout</h4>
                        <codemirror
                            *ngIf="testCaseSelected.systemout.value !== ''"
                            [ngModel]="testCaseSelected.systemout.value"
                            [config]="codeMirrorConfig"
                            #textareaCodeMirror>
                        </codemirror>
                    </div>
                    <div *ngIf="testCaseSelected.systemerr && testCaseSelected.systemerr.value">
                        <h4>Systemerr</h4>
                        <codemirror
                            *ngIf="testCaseSelected.systemerr.value !== ''"
                            [ngModel]="testCaseSelected.systemerr.value"
                            [config]="codeMirrorConfig"
                            #textareaCodeMirror>
                        </codemirror>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>