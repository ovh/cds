<div class="ui form">
    <div class="fields">
        <div class="six wide field">
            <sui-select class="selection"
                        name="project"
                        placeholder="{{'timeline_filter_project_select' | translate}}"
                        labelField="name"
                        valueField="key"
                        [options]="projects"
                        [isSearchable]="true"
                        [(ngModel)]="selectedProjectKey" #selectProj>
                <sui-select-option *ngFor="let option of selectProj.filteredOptions" [value]="option"></sui-select-option>
            </sui-select>
        </div>
        <div class="two wide field">
            <button class="ui blue button" type="button" (click)="addProject()">{{'btn_add' | translate}}</button>
        </div>
    </div>
</div>

<ng-container *ngIf="filter.projects && filter.projects.length > 0">
    <h3>{{'timeline_filter_project' | translate}}</h3>
    <ng-container *ngFor="let p of filter.projects">
        <h4>
            <i class="caret icon" [class.down]="p.display" [class.right]="!p.display" (click)="openProject(p)"></i>
            {{p.key}}
            <div class="ui right floated">
                <app-delete-button (event)="removeProject(p)"></app-delete-button>
            </div>
        </h4>
        <ng-container *ngIf="p.display">
            <div class="ui mt25 form">
                <div class="fields">
                    <div class="six wide field">
                        <ng-container *ngIf="p?.project?.workflow_names?.length > 0">
                            <sui-select class="selection"
                                        name="project"
                                        placeholder="{{'timeline_filter_workflow_select' | translate}}"
                                        [options]="p.project.workflow_names"
                                        labelField="name"
                                        valueField="name"
                                        [isSearchable]="true"
                                        [(ngModel)]="selectedWorkflow" #selectWork>
                                <sui-select-option *ngFor="let option of selectWork.filteredOptions" [value]="option"></sui-select-option>
                            </sui-select>
                        </ng-container>
                    </div>
                    <div class="two wide field">
                        <button class="ui blue button" type="button" (click)="addWorkflow(p)">{{'btn_add' | translate}}</button>
                    </div>
                </div>
            </div>
            <h5>{{ 'timeline_filter_workflow_title' | translate }}</h5>
            <ul>
                <li *ngFor="let w of p.workflow_names">
                    <i class="close icon" (click)="removeWorkflow(p, w)"></i>{{w}}
                </li>
            </ul>
        </ng-container>
    </ng-container>
</ng-container>
<div class="ui form mt25">
    <div class="right aligned field">
        <button class="ui green button" type="button" (click)="saveFilter()">{{'btn_save' | translate }}</button>
    </div>

</div>


