<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.32.2" />
    <meta name="description" content="Enterprise-Grade Continuous Delivery &amp; DevOps Automation Open Source Platform">


    <title>Write your own hatchery :: CDS - Continuous Delivery Service</title>
    <link rel="shortcut icon" href="https://ovh.github.io/cds/images/favicon.png" type="image/x-icon" />
    <link href="https://ovh.github.io/cds/css/nucleus.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/solarized-light.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/featherlight.min.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/auto-complete.css" rel="stylesheet">
    
    <link href="https://ovh.github.io/cds/css/theme.css" rel="stylesheet">
    
    
      <link href="https://ovh.github.io/cds/css/theme-custom.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://ovh.github.io/cds/css/bootstrap.min.css">
    <script src="https://ovh.github.io/cds/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    
<link href="https://ovh.github.io/cds/css/custom-mermaid.css" rel="stylesheet">
  </head>
  <body class="" data-url="/hatchery/create/">
    <nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      <a href="https://ovh.github.io/cds/" title="CDS Documentation Home Page"> 
	<p><img src="https://ovh.github.io/cds/images/cds-transparent.png?width=40px" alt="CDS" /></p>
 

</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="https://ovh.github.io/cds/js/lunr.min.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/auto-complete.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/ovh.github.io\/cds";
</script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/search.js"></script>

    
  </div>

  <div id="sidebar-body">
    <ul class="topics">
        

        
          
          
    <li data-nav-id="/gettingstarted/" class="dd-item">
      <a href="https://ovh.github.io/cds/gettingstarted/">
        <span>Getting Started</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/gettingstarted/init_workflow_with_cdsctl/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/init_workflow_with_cdsctl/">
          <span>Init a CDS Workflow from a repository</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/import_workflow_with_webui/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/import_workflow_with_webui/">
          <span>Import a CDS Workflow from a repository</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/step_by_step_build_deploy/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/step_by_step_build_deploy/">
          <span>Build &amp; Deploy a standard application</span>
        </a>
    </li>
    <li data-nav-id="/gettingstarted/concepts/" class="dd-item">
      <a href="https://ovh.github.io/cds/gettingstarted/concepts/">
        <span>Concepts</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/gettingstarted/concepts/why_cds/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/why_cds/">
          <span>CDS - The origins</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/concepts/workflow/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/workflow/">
          <span>Workflow</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/concepts/pipeline/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/pipeline/">
          <span>Pipeline</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/concepts/stage/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/stage/">
          <span>Stage</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/concepts/job/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/job/">
          <span>Job</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/concepts/step/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/concepts/step/">
          <span>Step</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/gettingstarted/scopes/" class="dd-item">
      <a href="https://ovh.github.io/cds/gettingstarted/scopes/">
        <span>Scopes &amp; ACLs</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/gettingstarted/scopes/project/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/scopes/project/">
          <span>Project</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/scopes/application/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/scopes/application/">
          <span>Application</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/scopes/environment/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/scopes/environment/">
          <span>Environment</span>
        </a>
    </li>
      <li data-nav-id="/gettingstarted/scopes/permissions/" class="dd-item">
        <a href="https://ovh.github.io/cds/gettingstarted/scopes/permissions/">
          <span>Permissions</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
          
          
    <li data-nav-id="/workflows/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/">
        <span>Building CDS Workflows</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/workflows/design/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/design/">
        <span>Design your Workflow</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/design/payload/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/payload/">
          <span>Payload</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/pipeline-context/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/pipeline-context/">
          <span>Pipeline Context</span>
        </a>
    </li>
    <li data-nav-id="/workflows/design/hooks/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/design/hooks/">
        <span>Hooks</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/design/hooks/scheduler/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/hooks/scheduler/">
          <span>Scheduler</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/hooks/webhook/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/hooks/webhook/">
          <span>Webhook</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/hooks/git-poller/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/hooks/git-poller/">
          <span>Git Poller hook</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/hooks/git-repo-webhook/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/hooks/git-repo-webhook/">
          <span>Git Repository Webhook</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/hooks/kafka-hook/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/hooks/kafka-hook/">
          <span>Kafka hook</span>
        </a>
    </li>
        </ul>
    </li>
      <li data-nav-id="/workflows/design/run-conditions/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/run-conditions/">
          <span>Run conditions on pipeline</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/join/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/join/">
          <span>Join</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/mutex/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/mutex/">
          <span>Mutex</span>
        </a>
    </li>
      <li data-nav-id="/workflows/design/sidebar/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/sidebar/">
          <span>Sidebar</span>
        </a>
    </li>
    <li data-nav-id="/workflows/design/advanced/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/design/advanced/">
        <span>Workflows Advanced</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/design/advanced/update-run-number/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/design/advanced/update-run-number/">
          <span>Update a Workflow run number</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/pipelines/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/">
        <span>Building Pipelines</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/variables/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/variables/">
          <span>Variables</span>
        </a>
    </li>
    <li data-nav-id="/workflows/pipelines/actions/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/actions/">
        <span>Actions</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/workflows/pipelines/actions/builtin/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/">
        <span>Built-in Actions</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/actions/builtin/artifact-download/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/artifact-download/">
          <span>Artifact Download</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/artifact-upload/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/artifact-upload/">
          <span>Artifact Upload</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/gitclone/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/gitclone/">
          <span>GitClone</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/gittag/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/gittag/">
          <span>GitTag</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/junit/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/junit/">
          <span>JUnit</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/release/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/release/">
          <span>Release</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/builtin/script/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/builtin/script/">
          <span>Script</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/pipelines/actions/user/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/">
        <span>User Actions</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-docker-package/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-docker-package/">
          <span>cds-docker-package</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-go-build/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-go-build/">
          <span>cds-go-build</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-nexus-upload/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-nexus-upload/">
          <span>cds-nexus-upload</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-perl-test/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-perl-test/">
          <span>cds-perl-test</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-publish-ovh-metrics/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-publish-ovh-metrics/">
          <span>cds-publish-ovh-metrics</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-python-pylint/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-python-pylint/">
          <span>cds-python-pylint</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-split-download/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-split-download/">
          <span>cds-split-download</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/user/cds-split-upload/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/user/cds-split-upload/">
          <span>cds-split-upload</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/pipelines/actions/plugins/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/">
        <span>Plugins Actions</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/actions/plugins/write-plugin/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/write-plugin/">
          <span>Write a Plugin</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-download/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-download/">
          <span>plugin-download</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-group-tmpl/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-group-tmpl/">
          <span>plugin-group-tmpl</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-kafka-publish/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-kafka-publish/">
          <span>plugin-kafka-publish</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-marathon/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-marathon/">
          <span>plugin-marathon</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-ssh-cmd/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-ssh-cmd/">
          <span>plugin-ssh-cmd</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-tmpl/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-tmpl/">
          <span>plugin-tmpl</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/actions/plugins/plugin-venom/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/actions/plugins/plugin-venom/">
          <span>plugin-venom</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/pipelines/requirements/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/">
        <span>Job&#39;s Requirements</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/workflows/pipelines/requirements/network_access/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/network_access/">
        <span>Network Access</span>
      </a>
    </li>
    <li data-nav-id="/workflows/pipelines/requirements/service/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/service/">
        <span>Service Link</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/requirements/service/example-nginx/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/service/example-nginx/">
          <span>Service Requirement Nginx</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/requirements/service/example-pg/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/service/example-pg/">
          <span>Service Requirement PostgreSQL</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/pipelines/requirements/worker-model/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/">
        <span>Worker Model</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/workflows/pipelines/requirements/worker-model/docker/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/docker/">
        <span>Docker Worker Model</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/pipelines/requirements/worker-model/docker/docker-customized/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/docker/docker-customized/">
          <span>Worker Model with your own image</span>
        </a>
    </li>
        </ul>
    </li>
      <li data-nav-id="/workflows/pipelines/requirements/worker-model/openstack/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/openstack/">
          <span>Openstack Worker Model</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/requirements/worker-model/variables/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/variables/">
          <span>Worker Model Variables</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/requirements/worker-model/patterns/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/patterns/">
          <span>Worker Model patterns</span>
        </a>
    </li>
      <li data-nav-id="/workflows/pipelines/requirements/worker-model/vsphere/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/pipelines/requirements/worker-model/vsphere/">
          <span>VSphere Worker Model</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/workflows/files/" class="dd-item">
      <a href="https://ovh.github.io/cds/workflows/files/">
        <span>Workflow configuration files</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/workflows/files/workflow-syntax/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/files/workflow-syntax/">
          <span>Workflow syntax</span>
        </a>
    </li>
      <li data-nav-id="/workflows/files/pipeline-syntax/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/files/pipeline-syntax/">
          <span>Pipeline syntax</span>
        </a>
    </li>
      <li data-nav-id="/workflows/files/application-syntax/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/files/application-syntax/">
          <span>Application syntax</span>
        </a>
    </li>
      <li data-nav-id="/workflows/files/environment-syntax/" class="dd-item">
        <a href="https://ovh.github.io/cds/workflows/files/environment-syntax/">
          <span>Environment syntax</span>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
          
          
    <li data-nav-id="/worker/" class="dd-item">
      <a href="https://ovh.github.io/cds/worker/">
        <span>Worker</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/worker/setup-your-worker/" class="dd-item">
        <a href="https://ovh.github.io/cds/worker/setup-your-worker/">
          <span>Setup your worker</span>
        </a>
    </li>
      <li data-nav-id="/worker/update/" class="dd-item">
        <a href="https://ovh.github.io/cds/worker/update/">
          <span>Update your worker</span>
        </a>
    </li>
      <li data-nav-id="/worker/workspace/" class="dd-item">
        <a href="https://ovh.github.io/cds/worker/workspace/">
          <span>Workspace</span>
        </a>
    </li>
        </ul>
    </li>
          
          
    <li data-nav-id="/hatchery/" class="dd-item parent">
      <a href="https://ovh.github.io/cds/hatchery/">
        <span>Hatchery</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hatchery/local/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/local/">
          <span>Hatchery Local</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/kubernetes/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/kubernetes/">
          <span>Hatchery Kubernetes</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/marathon/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/marathon/">
          <span>Hatchery Marathon</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/openstack/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/openstack/">
          <span>Hatchery Openstack</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/swarm/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/swarm/">
          <span>Hatchery Swarm</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/vsphere/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/vsphere/">
          <span>Hatchery Vsphere</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/update/" class="dd-item">
        <a href="https://ovh.github.io/cds/hatchery/update/">
          <span>Update your hatchery</span>
        </a>
    </li>
      <li data-nav-id="/hatchery/create/" class="dd-item active">
        <a href="https://ovh.github.io/cds/hatchery/create/">
          <span>Write your own hatchery</span>
        </a>
    </li>
        </ul>
    </li>
          
          
    <li data-nav-id="/cli/" class="dd-item">
      <a href="https://ovh.github.io/cds/cli/">
        <span>Command Line - REST API - SDK</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
        </ul>
    </li>
          
          
    <li data-nav-id="/hosting/" class="dd-item">
      <a href="https://ovh.github.io/cds/hosting/">
        <span>Hosting your own instance</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hosting/requirements/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/requirements/">
          <span>Requirements</span>
        </a>
    </li>
      <li data-nav-id="/hosting/download/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/download/">
          <span>Download</span>
        </a>
    </li>
    <li data-nav-id="/hosting/ready-to-run/" class="dd-item">
      <a href="https://ovh.github.io/cds/hosting/ready-to-run/">
        <span>Ready to RUN</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hosting/ready-to-run/docker-compose/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/ready-to-run/docker-compose/">
          <span>Docker Compose</span>
        </a>
    </li>
      <li data-nav-id="/hosting/ready-to-run/from-binaries/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/ready-to-run/from-binaries/">
          <span>Run with binaries</span>
        </a>
    </li>
        </ul>
    </li>
      <li data-nav-id="/hosting/configuration/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/configuration/">
          <span>Configuration</span>
        </a>
    </li>
      <li data-nav-id="/hosting/database/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/database/">
          <span>Database Management</span>
        </a>
    </li>
    <li data-nav-id="/hosting/repositories-manager/" class="dd-item">
      <a href="https://ovh.github.io/cds/hosting/repositories-manager/">
        <span>Repositories Manager</span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hosting/repositories-manager/github/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/repositories-manager/github/">
          <span>Github</span>
        </a>
    </li>
      <li data-nav-id="/hosting/repositories-manager/bitbucket/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/repositories-manager/bitbucket/">
          <span>Bitbucket</span>
        </a>
    </li>
      <li data-nav-id="/hosting/repositories-manager/gitlab/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/repositories-manager/gitlab/">
          <span>Gitlab</span>
        </a>
    </li>
        </ul>
    </li>
      <li data-nav-id="/hosting/monitoring/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/monitoring/">
          <span>Monitoring</span>
        </a>
    </li>
      <li data-nav-id="/hosting/upgrade/" class="dd-item">
        <a href="https://ovh.github.io/cds/hosting/upgrade/">
          <span>Upgrade your CDS Instance</span>
        </a>
    </li>
        </ul>
    </li>
          
          
    <li data-nav-id="/contribute/" class="dd-item">
      <a href="https://ovh.github.io/cds/contribute/">
        <span>Opensource / Contribute</span>
      </a>
    </li>
          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3></h3>
                    <a href="https://github.com/ovh/cds"><i class='fa fa-github'></i> Source Code</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://github.com/ovh/cds/releases"><i class='fa fa-download'></i> Releases</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://gitter.im/ovh-cds/Lobby"><i class='fa fa-commenting'></i> Gitter</a>
                    
                </li>
            
        </section>

        

        
    </ul>
    </div>

    <section id="footer">
      
<section style="text-align:center">
  <p>Built with <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/vjeantet/hugo-theme-docdock">docdock theme</a></i></p>
  <p><a href="https://ovh.com"><img src="https://ovh.github.io/tat/imgs/ovh-logo.png"></a></p>
</section>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/ovh/cds/edit/master/docs/content/hatchery/create.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Edit page
              </a>
            </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='https://ovh.github.io/cds/'>CDS - Continuous Delivery Service</a> > <a href='https://ovh.github.io/cds/hatchery/'>Hatchery</a> > Write your own hatchery

 

 


                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#example-with-a-creation-of-a-vsphere-hatchery">Example with a creation of a VSphere hatchery</a></li>
<li><a href="#test">Test</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <div id="page-title">
                <h1>Write your own hatchery</h1>
                <p></p>
            </div>
          






<h3 id="example-with-a-creation-of-a-vsphere-hatchery">Example with a creation of a VSphere hatchery</h3>

<ul>
<li><p>First of all you need to create a new package like the other into the hatchery package. Let&rsquo;s call this package vsphere for our example.</p></li>

<li><p>You have to implement the Service interface (see <a href="https://github.com/ovh/cds/blob/master/engine/types.go">here</a>) in order to configure launch this new hatchery mode via CDS engine CLI.</p></li>

<li><p>Your have to create a Configuration structure composed of the <a href="https://godoc.org/github.com/ovh/cds/sdk/hatchery#CommonConfiguration">hatchery.CommonConfiguration</a> and the variables you need to access to Vsphere API. You finally have to update the <a href="https://github.com/ovh/cds/blob/master/engine/main.go">engine main.go file</a> to manage this new service and add and manage the configuration structure as part of the <a href="https://github.com/ovh/cds/blob/master/engine/types.go">global configuration</a>.</p></li>

<li><p>You need to implement the hatchery interface (see <a href="https://godoc.org/github.com/ovh/cds/sdk/hatchery#Interface">here</a>)</p></li>

<li><p>The <a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.Init">Init</a> function is useful to create the struct and to set all of these parameters, for our example it&rsquo;s in this function that we&rsquo;re going to create all our VSphere informations fetched from the VSphere API. (cf <a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.Init">init.go</a>). In this case we create a new vsphere client to request vsphere API, a new finder to fetch all informations about our vsphere host. In fact, all informations that we need to spawn and kill the vms with our workers inside on the vsphere infrastructure. This function is also used to create and register the hatchery on the api via the function in the sdk called <a href="https://godoc.org/github.com/ovh/cds/sdk/hatchery#Register">hatchery.Register</a>. This register will give you the id of your hatchery.</p></li>

<li><p>The <a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.ID">ID</a> function returns the id of the current hatchery that comes from the hatchery client registered with the sdk previously in the <a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.Init">Init</a> function.</p></li>

<li><p>The <a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.ModelType">ModelType</a> function returns the type of the hatchery, in this case it&rsquo;s vsphere type. We can create a constant VSphere inside our <a href="https://godoc.org/github.com/ovh/cds/sdk#pkg-constants">sdk package</a>.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.Hatchery">Hatchery</a> function returns the hatchery struct initialised previously in the <code>Init</code> function.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.Client">Client</a> function returns the sdk client initialised previously in the <code>Init</code> function too.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.NeedRegistration">NeedRegistration</a> is used to know if your worker model need registration. For example if a user update a worker model you have to rebuild the virtual machine model linked to this worker model. And this function returns true if the worker model was updated after the virtual machine model was created on vsphere. In order to know that for vsphere we have add some metadata on each vms in order to add more custom data as the last creation of this vm for example.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.WorkersStartedByModel">WorkersStartedByModel</a> returns all workers which are running with a worker model. In our vsphere example, in order to know that we register a string metadata called model which tell us the name of our worker model.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.WorkersStarted">WorkersStarted</a> returns all workers include those which are running to build a vm model or to register a worker model. For example in the vsphere case, in order to count them we all prefix our worker spawned with <code>worker-</code>.</p></li>

<li><p><a href="https://godoc.org/github.com/ovh/cds/engine/hatchery/vsphere#HatcheryVSphere.CanSpawn">CanSpawn</a> is where the magic happens, it&rsquo;s in this function that you spawn your vms with the right configuration. In fact with vsphere we check if there is a vm model already created for the worker model passed in parameter. If it doesn&rsquo;t we create a vm model with the user data store in worker model infos. Then we spawn a vm with right environment variables created from informations passed in parameters (workerModel, registerOnly, &hellip;) and with a script inside the vm that download the worker binary, execute it and shutdown when all is done. In this function we also check if the worker should be launch to register or to execute steps. When we launch a worker for register it means that the worker is launched and then send all there binary capabilities to the api for this worker model but don&rsquo;t execute any jobs.</p></li>

<li><p>In our vsphere implementation we also launch multiple goroutine to clean and kill workers which seem down or in error. It&rsquo;s a ticker that check all vms state in a periodic way.</p></li>
</ul>

<h3 id="test">Test</h3>

<p>If you want to test that you just have to launch it like that :</p>

<pre><code class="language-bash">$ engine start hatchery:vsphere --config config.toml
</code></pre>


<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        <a class="nav nav-prev" href="https://ovh.github.io/cds/hatchery/update/" title="Update your hatchery"> <i class="fa fa-chevron-left"></i></a>
            <a class="nav nav-next" href="https://ovh.github.io/cds/cli/" title="Command Line - REST API - SDK" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a></div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="https://ovh.github.io/cds/js/clipboard.min.js"></script>
<script src="https://ovh.github.io/cds/js/featherlight.min.js"></script>
<script src="https://ovh.github.io/cds/js/html5shiv-printshiv.min.js"></script>
<script src="https://ovh.github.io/cds/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://ovh.github.io/cds/js/modernizr.custom.71422.js"></script>
<script src="https://ovh.github.io/cds/js/learn.js"></script>
<script src="https://ovh.github.io/cds/js/hugo-learn.js"></script>
    
<script src="https://ovh.github.io/cds/js/jquery.sticky-kit.min.js"></script>
<script src="https://ovh.github.io/cds/js/custom.js"></script>
  </body>
</html>

